<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Hemera · Writing reliable &amp; fault-tolerant microservices in Node.js</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Hemera · Writing reliable &amp; fault-tolerant microservices in Node.js"/><meta property="og:type" content="website"/><meta property="og:url" content="https://hemerajs.github.io/hemera//hemera/index.html"/><meta property="og:description" content="Writing reliable &amp; fault-tolerant microservices in Node.js"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/hemera/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://hemerajs.github.io/hemera//blog/atom.xml" title="Hemera Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://hemerajs.github.io/hemera//blog/feed.xml" title="Hemera Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-115960465-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/hemera/css/main.css"/></head><body class=""><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/hemera/"><img class="logo" src="/hemera/img/hemera-tiny.png" alt="Hemera"/><h2 class="headerTitleWithLogo">Hemera</h2></a><a href="/hemera/versions.html"><h3>5.8.3</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/hemera/docs/what-is-hemera.html" target="_self">Docs</a></li><li class=""><a href="/hemera/help.html" target="_self">Help</a></li><li class=""><a href="/hemera/blog" target="_self">Blog</a></li><li class=""><a href="https://github.com/hemerajs/hemera" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div><div class="homeContainer"><div class="homeSplashFade"><div class="wrapper homeWrapper"><div class="projectLogo"><img src="/hemera/img/hemera.png"/></div><div class="inner"><h2 class="projectTitle"><small>Writing reliable &amp; fault-tolerant microservices in Node.js</small></h2><div class="section promoSection"><div class="promoRow"><div class="pluginRowBlock"><div class="pluginWrapper buttonWrapper"><a class="button" href="https://repl.it/@StarpTech/Hemera-5" target="_self">Try It Out</a></div><div class="pluginWrapper buttonWrapper"><a class="button" href="/hemera/docs/installation.html" target="_self">Getting Started</a></div><div class="pluginWrapper buttonWrapper"><a class="button" href="/hemera/docs/ecosystem.html" target="_self">Plugins</a></div></div></div></div></div></div></div></div><div class="mainContainer"><div class="container paddingBottom paddingTop"><div class="wrapper"><div class="gridBlock"><div class="blockElement alignCenter fourByGridBlock imageAlignTop"><div class="blockImage"><img src="/hemera/img/target.svg"/></div><div class="blockContent"><h2><div><span><p>Scalability</p>
</span></div></h2><div><span><p>Any subscription is managed by NATS. You don't need any service discovery. Total location transparency.</p>
</span></div></div></div><div class="blockElement alignCenter fourByGridBlock imageAlignTop"><div class="blockImage"><img src="/hemera/img/growth.svg"/></div><div class="blockContent"><h2><div><span><p>Fault tolerance</p>
</span></div></h2><div><span><p>Auto-heals when new services are added. Configure cluster mode to increase reliability.</p>
</span></div></div></div><div class="blockElement alignCenter fourByGridBlock imageAlignTop"><div class="blockImage"><img src="/hemera/img/exchange.svg"/></div><div class="blockContent"><h2><div><span><p>Plugins</p>
</span></div></h2><div><span><p>Providing reliable and modern plugins to the community e.g for RabbitMQ, Zipkin, Jaeger, Mongodb, Arangodb or Elasticsearch.</p>
</span></div></div></div><div class="blockElement alignCenter fourByGridBlock imageAlignTop"><div class="blockImage"><img src="/hemera/img/puzzle.svg"/></div><div class="blockContent"><h2><div><span><p>Extensible</p>
</span></div></h2><div><span><p>Hook into the server or client lifecycle with the help of extensions. Use middlewares or the validation library of your choice.</p>
</span></div></div></div><div class="blockElement alignCenter fourByGridBlock imageAlignTop"><div class="blockImage"><img src="/hemera/img/unity.svg"/></div><div class="blockContent"><h2><div><span><p>Load Balancing</p>
</span></div></h2><div><span><p>Requests are load balanced (random) by NATS mechanism of &quot;queue groups&quot;.</p>
</span></div></div></div><div class="blockElement alignCenter fourByGridBlock imageAlignTop"><div class="blockImage"><img src="/hemera/img/connection.svg"/></div><div class="blockContent"><h2><div><span><p>Pattern driven</p>
</span></div></h2><div><span><p>Define the signatures of your RPC's in JSON and use the flexibility of pattern-matching.</p>
</span></div></div></div><div class="blockElement alignCenter fourByGridBlock imageAlignTop"><div class="blockImage"><img src="/hemera/img/sharing.svg"/></div><div class="blockContent"><h2><div><span><p>Metadata</p>
</span></div></h2><div><span><p>Transfer metadata across services or attach contextual data to tracing systems.</p>
</span></div></div></div><div class="blockElement alignCenter fourByGridBlock imageAlignTop"><div class="blockImage"><img src="/hemera/img/income.svg"/></div><div class="blockContent"><h2><div><span><p>Serialization</p>
</span></div></h2><div><span><p>Use custom serializer e.g MessagePack.</p>
</span></div></div></div></div></div></div><div class="productShowcaseSection paddingBottom codeExampleContainer"><h2>Give it a try</h2><div style="text-align:center"><h3 style="margin-top:25px">Install NATS Client and Hemera</h3><div><span><pre><code class="hljs css bash">npm install nats nats-hemera
</code></pre>
</span></div><h3>Install NATS Server</h3><div><span><pre><code class="hljs css bash">
<span class="hljs-comment"># Download NATS</span>
https://nats.io/download/
<span class="hljs-comment"># Start</span>
./gnatsd
      
</code></pre>
</span></div><h3>Example</h3></div><div class="exampleContainer"><div><span><pre><code class="hljs css javascript">
  <span class="hljs-keyword">const</span> Hemera = <span class="hljs-built_in">require</span>(<span class="hljs-string">'nats-hemera'</span>)
  <span class="hljs-keyword">const</span> HemeraJoi = <span class="hljs-built_in">require</span>(<span class="hljs-string">'hemera-joi'</span>)
  <span class="hljs-keyword">const</span> nats = <span class="hljs-built_in">require</span>(<span class="hljs-string">'nats'</span>).connect()

  <span class="hljs-keyword">const</span> hemera = <span class="hljs-keyword">new</span> Hemera(nats, {
    <span class="hljs-attr">logLevel</span>: <span class="hljs-string">'info'</span>
  })

  <span class="hljs-comment">// set payload validator of your choice</span>
  hemera.use(HemeraJoi)

  <span class="hljs-keyword">const</span> start = <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// establish connection and bootstrap hemera</span>
      <span class="hljs-keyword">await</span> hemera.ready()

      <span class="hljs-comment">// use exposed lib from plugin</span>
      <span class="hljs-keyword">let</span> Joi = hemera.joi

      <span class="hljs-comment">// define your first server action</span>
      hemera.add(
        {
          <span class="hljs-attr">topic</span>: <span class="hljs-string">'math'</span>,
          <span class="hljs-attr">cmd</span>: <span class="hljs-string">'add'</span>,
          <span class="hljs-attr">a</span>: Joi.number().required(),
          <span class="hljs-attr">b</span>: Joi.number().required()
        },
        <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">req</span>) </span>{
          <span class="hljs-keyword">return</span> req.a + req.b
        }
      )
      hemera.log.info(<span class="hljs-string">'service listening'</span>)

      <span class="hljs-comment">// start first request</span>
      <span class="hljs-keyword">let</span> response = <span class="hljs-keyword">await</span> hemera.act({
        <span class="hljs-attr">topic</span>: <span class="hljs-string">'math'</span>,
        <span class="hljs-attr">cmd</span>: <span class="hljs-string">'add'</span>,
        <span class="hljs-attr">a</span>: <span class="hljs-number">10</span>,
        <span class="hljs-attr">b</span>: <span class="hljs-number">10</span>
      })
      hemera.log.info(response.data)

      <span class="hljs-comment">// keep the parent "context" to retain meta and trace informations</span>
      response = <span class="hljs-keyword">await</span> response.context.act({
        <span class="hljs-attr">topic</span>: <span class="hljs-string">'math'</span>,
        <span class="hljs-attr">cmd</span>: <span class="hljs-string">'add'</span>,
        <span class="hljs-attr">a</span>: <span class="hljs-number">10</span>,
        <span class="hljs-attr">b</span>: <span class="hljs-number">10</span>
      })
      hemera.log.info(response.data)
    } <span class="hljs-keyword">catch</span> (err) {
      hemera.log.error(err)
      process.exit(<span class="hljs-number">1</span>)
    }
  }
  start()
</code></pre>
</span></div></div></div><div class="container lightBackground paddingBottom paddingTop"><div class="wrapper"><div class="gridBlock"><div class="blockElement alignCenter imageAlignSide imageAlignRight twoByGridBlock"><div class="blockContent"><h2><div><span><p>What is Hemera?</p>
</span></div></h2><div><span><p>Hemera (/ˈhɛmərə/; Ancient Greek: Ἡμέρα [hɛːméra] &quot;day&quot;) is a small wrapper around the NATS driver. NATS is a simple, fast and reliable solution for the internal communication of a distributed system. It chooses simplicity and reliability over guaranteed delivery. We want to provide a toolkit to develop micro services in an easy and powerful way. We provide a pattern matching RPC style. You don't have to worry about the transport. NATS is powerful. Efficient pattern matching to have the most flexibility in defining your RPC's. It doesn't matter where your server or client lives. You can add the same add as many as you want on different hosts to ensure maximal availability. The only dependency you have is a single binary of 7MB. Mind your own business NATS will do the rest for you.</p>
</span></div></div><div class="blockImage"><img src="/hemera/img/hemera-figure.png"/></div></div></div></div></div><div class="productShowcaseSection paddingBottom" style="text-align:center"><h2 style="margin:30px 0 30px 0">What is NATS?</h2><iframe width="40%" height="33%" src="https://www.youtube.com/embed/6uPopWEdldU?showinfo=0" frameborder="0" allow="autoplay; encrypted-media"></iframe></div><div class="container darkBackground paddingBottom paddingTop"><div class="wrapper"><div class="gridBlock"><div class="blockElement alignCenter imageAlignSide imageAlignRight twoByGridBlock"><div class="blockContent"><h2><div><span><p>Be aware of your requirements</p>
</span></div></h2><div><span><p>Hemera has not been designed for high performance on a single process. It has been designed to create lots of microservices doesn't matter where they live. It choose simplicity and reliability as primary goals. It act together with NATS as central nervous system of your distributed system. Transport independency was not considered to be a relevant factor. In addition we use pattern matching which is very powerful. The fact that Hemera needs a broker is an argument which should be taken into consideration when you compare hemera with other frameworks. The relevant difference between microservice frameworks like senecajs, moleculer is not the performance or modularity its about the complexity you need to manage. Hemera is expert in providing an interface to work with lots of services in the network, NATS is the expert to deliver the message at the right place. Hemera is still a subscriber of NATS with some magic in routing and extensions. We don't have to worry about all different aspects in a distributed system like routing, load-balancing, service-discovery, clustering, health-checks ...</p>
</span></div></div><div class="blockImage"><img src="/hemera/img/nodejs-rpc-frameworks.png"/></div></div></div></div></div><div class="productShowcaseSection paddingBottom"><h2>Who&#x27;s Using This?</h2><p>This project is used by all these people</p><div class="logos"><a href="http://www.appcom-interactive.de/"><img src="/hemera/img/company/appcom.svg" title="appcom interactive"/></a><a href="https://amerbank.com/"><img src="/hemera/img/company/amerbank.png" title="amerbank"/></a><a href="https://www.savicontrols.com/"><img src="/hemera/img/company/savicontrols.png" title="savicontrols"/></a><a href="https://www.mercado-unico.com/"><img src="/hemera/img/company/mercado-unico.png" title="mercado unico"/></a></div><div class="more-users"><a class="button" href="/hemera/users.html">More Hemera Users</a></div></div></div><div class="iconLicenseContainer">Icons made by <a href="https://www.flaticon.com/authors/smartline" title="Smartline">Smartline</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/hemera/" class="nav-home"><img src="/hemera/img/hemera-blackwhite.png" alt="Hemera" width="66" height="58"/></a><div><h5>Docs</h5><a href="/hemera/docs/installation.html">Getting Started</a><a href="/hemera/docs/plugin.html">Create a plugin</a><a href="/hemera/docs/api.html">API Reference</a></div><div><h5>Community</h5><a href="/hemera/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/hemera" target="_blank">Stack Overflow</a><a href="https://gitter.im/hemerajs/hemera">Gitter Chat</a><a href="https://twitter.com/hemerajs" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/hemera/blog">Blog</a><a href="https://github.com/hemerajs/hemera">GitHub</a><a class="github-button" href="https://github.com/hemerajs/hemera/" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 Hemera.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '5620e631e688fee9d15ed89f7d258f1a',
                indexName: 'hemerajs',
                inputSelector: '#search_input_react'
              });
            </script><script src="http://localhost:35729/livereload.js"></script></body></html>